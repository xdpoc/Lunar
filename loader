print([[
 
    _    ____   ____    ____ _     ___ ____ _   _ _____
   / \  |  _ \ / ___|  / ___| |   |_ _/ ___| \ | |_   _|
  / _ \ | |_) | |     | |   | |    | | |   |  \| | | |  
 / ___ \|  _ <| |___  | |___| |___ | | |___| |\  | | |  
/_/   \_\_| \_\\____|  \____|_____|___\____|_| \_| |_|  

    made by @mqp6 on discord
 
]])

print("haha u cant skid")

-- Load Linoria library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/mstudio45/LinoriaLib/main/Library.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/mstudio45/LinoriaLib/main/addons/SaveManager.lua"))()
local ThemeManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/mstudio45/LinoriaLib/main/addons/ThemeManager.lua"))()

-- Create the main window
local Window = Library:CreateWindow({
    Title = "Prison Life - Full Script",
    Center = true,
    AutoShow = true,
    TabPadding = 8,
    MenuFadeTime = 0.2
})

-- Create tabs
local MainTab = Window:AddTab("Main")
local RageTab = Window:AddTab("Rage")
local VisualsTab = Window:AddTab("Visuals")
local MiscTab = Window:AddTab("Misc")
local SettingsTab = Window:AddTab("Settings")

-- Services
local players = game:GetService("Players")
local teams = game:GetService("Teams")
local workspace = game:GetService("Workspace")
local replicatedStorage = game:GetService("ReplicatedStorage")
local runService = game:GetService("RunService")
local userInputService = game:GetService("UserInputService")
local virtualInputManager = game:GetService("VirtualInputManager")
local soundService = game:GetService("SoundService")
local tweenService = game:GetService("TweenService")

-- Local player
local localPlayer = players.LocalPlayer
local camera = workspace.CurrentCamera

-- Remotes
local remotes = replicatedStorage:WaitForChild("Remotes")
local gunRemotes = replicatedStorage:WaitForChild("GunRemotes")
local shootEvent = gunRemotes:WaitForChild("ShootEvent")
local meleeEvent = replicatedStorage:WaitForChild("meleeEvent")
local requestTeamChange = remotes:WaitForChild("RequestTeamChange")
local giverPressed = remotes:WaitForChild("GiverPressed")
local arrestPlayer = remotes:WaitForChild("ArrestPlayer")
local interactWithItem = remotes:WaitForChild("InteractWithItem")

-- ============================================
-- HIT SOUNDS
-- ============================================

local HITSOUNDS = {
    sparkle = "rbxassetid://18371248225",
    rust = "rbxassetid://18371251342",
    neverlose = "rbxassetid://18371254789",
    bow = "rbxassetid://18371258123"
}

local function playHitSound()
    if not Library.Toggles.HitSounds or not Library.Toggles.HitSounds.Value then return end
    
    local selected = Library.Options.HitSoundSelected and Library.Options.HitSoundSelected.Value or "sparkle"
    local soundId = HITSOUNDS[selected]
    if not soundId then return end
    
    local sound = Instance.new("Sound")
    sound.SoundId = soundId
    sound.Volume = Library.Options.HitSoundVolume and Library.Options.HitSoundVolume.Value or 0.5
    sound.Parent = soundService
    sound:Play()
    
    sound.Ended:Connect(function() sound:Destroy() end)
    task.delay(5, function() if sound and sound.Parent then sound:Destroy() end end)
end

-- ============================================
-- SILENT AIM SYSTEM
-- ============================================

local silentAim = {
    enabled = false,
    target = nil,
    circle = nil
}

-- Silent aim functions
local function getClosestPlayerToMouse()
    local mousePos = userInputService:GetMouseLocation()
    local closestDist = Library.Options.SilentRange and Library.Options.SilentRange.Value or 150
    local closestPlayer = nil
    
    for _, player in pairs(players:GetPlayers()) do
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
            local head = player.Character:FindFirstChild("Head")
            if head then
                local screenPos, onScreen = camera:WorldToViewportPoint(head.Position)
                if onScreen then
                    local dist = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
                    if dist < closestDist then
                        -- Wall check
                        if Library.Toggles.SilentWalls and Library.Toggles.SilentWalls.Value then
                            local ray = Ray.new(camera.CFrame.Position, (head.Position - camera.CFrame.Position).Unit * 1000)
                            local hit, pos = workspace:FindPartOnRayWithIgnoreList(ray, {localPlayer.Character})
                            if hit and hit:IsDescendantOf(player.Character) then
                                closestDist = dist
                                closestPlayer = player
                            end
                        else
                            closestDist = dist
                            closestPlayer = player
                        end
                    end
                end
            end
        end
    end
    
    return closestPlayer
end

local function getClosestPlayerToPosition(position)
    local closestDist = Library.Options.SilentRange and Library.Options.SilentRange.Value or 150
    local closestPlayer = nil
    
    for _, player in pairs(players:GetPlayers()) do
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
            local root = player.Character:FindFirstChild("HumanoidRootPart")
            if root then
                local dist = (root.Position - position).Magnitude
                if dist < closestDist then
                    -- Wall check
                    if Library.Toggles.SilentWalls and Library.Toggles.SilentWalls.Value then
                        local ray = Ray.new(position, (root.Position - position).Unit * dist)
                        local hit, pos = workspace:FindPartOnRayWithIgnoreList(ray, {localPlayer.Character})
                        if hit and hit:IsDescendantOf(player.Character) then
                            closestDist = dist
                            closestPlayer = player
                        end
                    else
                        closestDist = dist
                        closestPlayer = player
                    end
                end
            end
        end
    end
    
    return closestPlayer
end

-- Hook shoot event
local oldNamecall
oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
    local method = getnamecallmethod()
    local args = {...}
    
    if not checkcaller() and method == "FireServer" and self == shootEvent then
        if Library.Toggles.SilentAim and Library.Toggles.SilentAim.Value and localPlayer.Character and localPlayer.Character:FindFirstChild("Head") then
            local mode = Library.Options.SilentMode and Library.Options.SilentMode.Value or "Mouse"
            local target = nil
            
            if mode == "Mouse" then
                target = getClosestPlayerToMouse()
            else
                target = getClosestPlayerToPosition(localPlayer.Character.Head.Position)
            end
            
            if target and target.Character then
                local targetPart = target.Character:FindFirstChild("Head") or target.Character:FindFirstChild("HumanoidRootPart")
                if targetPart and type(args[1]) == "table" then
                    local hits = {}
                    for i = 1, #args[1] do
                        hits[i] = {localPlayer.Character.Head.Position, targetPart.Position, targetPart}
                    end
                    args[1] = hits
                    
                    if Library.Toggles.HitNotifications and Library.Toggles.HitNotifications.Value then
                        Library:Notify("Hit " .. target.Name .. "'s " .. targetPart.Name, 1)
                    end
                    
                    if Library.Toggles.HitSounds and Library.Toggles.HitSounds.Value then
                        playHitSound()
                    end
                end
            end
        end
        
        -- Check for hits for notifications/sounds
        if type(args[1]) == "table" then
            for _, hit in pairs(args[1]) do
                if type(hit[3]) == "userdata" and hit[3].Parent and hit[3].Parent:FindFirstChild("Humanoid") then
                    if Library.Toggles.HitNotifications and Library.Toggles.HitNotifications.Value and not Library.Toggles.SilentAim.Value then
                        Library:Notify("Hit " .. hit[3].Parent.Name .. "'s " .. hit[3].Name, 1)
                    end
                    if Library.Toggles.HitSounds and Library.Toggles.HitSounds.Value then
                        playHitSound()
                    end
                end
            end
        end
    end
    
    return oldNamecall(self, ...)
end)

-- ============================================
-- KILLAURA SYSTEM
-- ============================================

local killaura = {
    enabled = false,
    nextAttack = 0
}

-- Killaura loop
runService.RenderStepped:Connect(function()
    -- Silent aim circle
    if Library.Toggles.SilentAim and Library.Toggles.RangeCircle and Library.Toggles.RangeCircle.Value then
        if not silentAim.circle then
            silentAim.circle = Drawing.new("Circle")
            silentAim.circle.Visible = true
        end
        silentAim.circle.Position = userInputService:GetMouseLocation()
        silentAim.circle.Radius = Library.Options.SilentRange and Library.Options.SilentRange.Value or 150
        silentAim.circle.Color = Library.Options.CircleColor or Color3.new(1, 1, 1)
        silentAim.circle.Transparency = 1 - (Library.Options.CircleTransparency or 0.5)
        silentAim.circle.Filled = Library.Toggles.CircleFilled and Library.Toggles.CircleFilled.Value or false
        silentAim.circle.NumSides = 100
    elseif silentAim.circle then
        silentAim.circle.Visible = false
        silentAim.circle:Remove()
        silentAim.circle = nil
    end
    
    -- Killaura
    if Library.Toggles.Killaura and Library.Toggles.Killaura.Value and localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local root = localPlayer.Character.HumanoidRootPart
        local attacks = 0
        local maxTargets = Library.Options.KillauraMaxTargets or 10
        
        for _, player in pairs(players:GetPlayers()) do
            if attacks >= maxTargets then break end
            if player ~= localPlayer and player.Character and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
                local targetRoot = player.Character:FindFirstChild("HumanoidRootPart")
                if targetRoot then
                    local dist = (targetRoot.Position - root.Position).Magnitude
                    if dist < (Library.Options.KillauraRange or 13) then
                        -- Wall check
                        if Library.Toggles.KillauraWalls and Library.Toggles.KillauraWalls.Value then
                            local ray = Ray.new(root.Position, (targetRoot.Position - root.Position).Unit * dist)
                            local hit, pos = workspace:FindPartOnRayWithIgnoreList(ray, {localPlayer.Character})
                            if hit and hit:IsDescendantOf(player.Character) then
                                if tick() >= killaura.nextAttack then
                                    local cpsMin = Library.Options.KillauraCPSMin or 8
                                    local cpsMax = Library.Options.KillauraCPSMax or 12
                                    killaura.nextAttack = tick() + (1 / (cpsMin + math.random() * (cpsMax - cpsMin)))
                                    meleeEvent:FireServer(player, 1, 1)
                                    attacks = attacks + 1
                                    
                                    if Library.Toggles.HitSounds and Library.Toggles.HitSounds.Value then
                                        playHitSound()
                                    end
                                end
                            end
                        else
                            if tick() >= killaura.nextAttack then
                                local cpsMin = Library.Options.KillauraCPSMin or 8
                                local cpsMax = Library.Options.KillauraCPSMax or 12
                                killaura.nextAttack = tick() + (1 / (cpsMin + math.random() * (cpsMax - cpsMin)))
                                meleeEvent:FireServer(player, 1, 1)
                                attacks = attacks + 1
                                
                                if Library.Toggles.HitSounds and Library.Toggles.HitSounds.Value then
                                    playHitSound()
                                end
                            end
                        end
                    end
                end
            end
        end
    end
end)

-- ============================================
-- AUTO RELOAD SYSTEM
-- ============================================

local function autoReload()
    if not Library.Toggles.AutoReload or not Library.Toggles.AutoReload.Value then return end
    if not localPlayer.Character then return end
    
    local tool = localPlayer.Character:FindFirstChildOfClass("Tool")
    if tool then
        local ammo = tool:GetAttribute("Local_CurrentAmmo")
        if ammo and ammo <= 0 then
            virtualInputManager:SendKeyEvent(true, Enum.KeyCode.R, false, game)
            task.wait(0.05)
            virtualInputManager:SendKeyEvent(false, Enum.KeyCode.R, false, game)
            
            if Library.Toggles.AutoSwitch and Library.Toggles.AutoSwitch.Value then
                local backpack = localPlayer:FindFirstChildOfClass("Backpack")
                if backpack then
                    for _, v in pairs(backpack:GetChildren()) do
                        if v:IsA("Tool") and v:GetAttribute("Local_CurrentAmmo") and v:GetAttribute("Local_CurrentAmmo") > 0 then
                            localPlayer.Character.Humanoid:UnequipTools()
                            localPlayer.Character.Humanoid:EquipTool(v)
                            break
                        end
                    end
                end
            end
        end
    end
end

-- Monitor ammo changes
localPlayer.CharacterAdded:Connect(function(char)
    char.ChildAdded:Connect(function(child)
        if child:IsA("Tool") then
            child:GetAttributeChangedSignal("Local_CurrentAmmo"):Connect(function()
                autoReload()
            end)
        end
    end)
end)

if localPlayer.Character then
    for _, child in pairs(localPlayer.Character:GetChildren()) do
        if child:IsA("Tool") then
            child:GetAttributeChangedSignal("Local_CurrentAmmo"):Connect(function()
                autoReload()
            end)
        end
    end
end

-- ============================================
-- GUN MODS SYSTEM
-- ============================================

local function applyGunMods(tool)
    if not Library.Toggles.GunMods or not Library.Toggles.GunMods.Value then return end
    if tool:IsA("Tool") and tool:GetAttribute("Local_ReloadSession") then
        tool:SetAttribute("Range", Library.Options.GunRange and Library.Options.GunRange.Value or 150)
        tool:SetAttribute("AccurateRange", Library.Options.GunRange and Library.Options.GunRange.Value or 150)
        tool:SetAttribute("SpreadRadius", Library.Options.SpreadRadius and Library.Options.SpreadRadius.Value or 0.03)
        tool:SetAttribute("FireRate", Library.Options.FireRate and Library.Options.FireRate.Value or 0.1)
    end
end

localPlayer.CharacterAdded:Connect(function(char)
    char.ChildAdded:Connect(applyGunMods)
    for _, child in pairs(char:GetChildren()) do
        applyGunMods(child)
    end
end)

localPlayer:FindFirstChildOfClass("Backpack").ChildAdded:Connect(applyGunMods)

-- ============================================
-- TEAM SWITCHER
-- ============================================

local function switchTeam(team)
    if team == "Neutral" then
        requestTeamChange:InvokeServer(teams.Neutral, 1)
    elseif team == "Guards" then
        requestTeamChange:InvokeServer(teams.Neutral, 1)
        task.wait(1.5)
        requestTeamChange:InvokeServer(teams.Guards, 1)
    elseif team == "Criminals" then
        if localPlayer.Team == teams.Inmates then
            local shipping = workspace:FindFirstChild("Shippingcontainers")
            if shipping then
                repeat
                    if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                        localPlayer.Character.HumanoidRootPart.CFrame = shipping.WorldPivot
                    end
                    task.wait(0.05)
                until localPlayer.Team == teams.Criminals
            end
        else
            Library:Notify("Please switch to Inmates first", 3)
        end
    elseif team == "Inmates" then
        requestTeamChange:InvokeServer(teams.Neutral, 1)
        task.wait(1.5)
        requestTeamChange:InvokeServer(teams.Inmates, 1)
    end
end

-- ============================================
-- AUTO PICKUP SYSTEM
-- ============================================

local function pickUpItem(item)
    if not Library.Toggles.AutoPickup or not Library.Toggles.AutoPickup.Value then return end
    if not localPlayer.Character then return end
    
    local name = item.Name
    if name == "Key card" and not Library.Toggles.PickupKeycard then return end
    if name == "M9" and not Library.Toggles.PickupM9 then return end
    
    local handle = item:FindFirstChildWhichIsA("BasePart") or item.PrimaryPart
    if handle then
        local oldPos = localPlayer.Character.HumanoidRootPart.CFrame
        local newPos = handle.CFrame * CFrame.new(0, -5, 0)
        
        repeat
            if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                localPlayer.Character.HumanoidRootPart.CFrame = newPos
                giverPressed:FireServer(item)
                task.wait(0.5)
            end
        until not localPlayer.Character or not item.Parent
        
        if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
            localPlayer.Character.HumanoidRootPart.CFrame = oldPos
        end
    end
end

workspace.ChildAdded:Connect(pickUpItem)

-- ============================================
-- HEAD PITCH SPINBOT
-- ============================================

local originalNeckCF = CFrame.new()
runService.PreSimulation:Connect(function()
    if Library.Toggles.HeadPitch and Library.Toggles.HeadPitch.Value and localPlayer.Character then
        local torso = localPlayer.Character:FindFirstChild("Torso")
        if torso then
            local neck = torso:FindFirstChild("Neck")
            if neck then
                if originalNeckCF == CFrame.new() then
                    originalNeckCF = neck.C1
                end
                neck.C1 = neck.C1 * CFrame.Angles(math.rad(145), 0, 0)
            end
        end
    elseif originalNeckCF ~= CFrame.new() and localPlayer.Character then
        local torso = localPlayer.Character:FindFirstChild("Torso")
        if torso then
            local neck = torso:FindFirstChild("Neck")
            if neck then
                neck.C1 = originalNeckCF
                originalNeckCF = CFrame.new()
            end
        end
    end
end)

-- ============================================
-- AUTO ARREST SYSTEM
-- ============================================

local arrestCooldown = 0

localPlayer.CharacterAdded:Connect(function()
    for _, player in pairs(players:GetPlayers()) do
        if player ~= localPlayer then
            player.CharacterAdded:Connect(function(char)
                char:GetAttributeChangedSignal("Tased"):Connect(function()
                    if not Library.Toggles.AutoArrest or not Library.Toggles.AutoArrest.Value then return end
                    if tick() - arrestCooldown < 7.5 then return end
                    if localPlayer.Team ~= teams.Guards then return end
                    
                    if char:GetAttribute("Tased") == true then
                        if player.Team == teams.Criminals or (player.Team == teams.Inmates and (char:GetAttribute("Trespassing") or char:GetAttribute("Hostile"))) then
                            local dist = (localPlayer.Character.HumanoidRootPart.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist > (Library.Options.ArrestRange or 100) then return end
                            
                            local handcuffs = char:FindFirstChild("Handcuffs") or localPlayer.Backpack:FindFirstChild("Handcuffs")
                            if handcuffs then
                                handcuffs.Parent = char
                                repeat
                                    arrestPlayer:InvokeServer(player, 1)
                                    interactWithItem:InvokeServer(char.Head)
                                    task.wait(0.1)
                                until not char or char:GetAttribute("Arrested")
                                handcuffs.Parent = localPlayer.Backpack
                                arrestCooldown = tick()
                            end
                        end
                    end
                end)
            end)
        end
    end
end)

-- ============================================
-- MOVEMENT SYSTEMS
-- ============================================

-- Speed hack
runService.RenderStepped:Connect(function()
    if Library.Toggles.SpeedToggle and Library.Toggles.SpeedToggle.Value and localPlayer.Character and localPlayer.Character:FindFirstChild("Humanoid") then
        localPlayer.Character.Humanoid.WalkSpeed = Library.Options.WalkSpeed and Library.Options.WalkSpeed.Value or 50
    elseif localPlayer.Character and localPlayer.Character:FindFirstChild("Humanoid") and localPlayer.Character.Humanoid.WalkSpeed ~= 16 then
        localPlayer.Character.Humanoid.WalkSpeed = 16
    end
end)

-- Jump power
runService.RenderStepped:Connect(function()
    if Library.Toggles.JumpToggle and Library.Toggles.JumpToggle.Value and localPlayer.Character and localPlayer.Character:FindFirstChild("Humanoid") then
        localPlayer.Character.Humanoid.JumpPower = Library.Options.JumpPower and Library.Options.JumpPower.Value or 100
    elseif localPlayer.Character and localPlayer.Character:FindFirstChild("Humanoid") and localPlayer.Character.Humanoid.JumpPower ~= 50 then
        localPlayer.Character.Humanoid.JumpPower = 50
    end
end)

-- Noclip
runService.Stepped:Connect(function()
    if Library.Toggles.NoclipToggle and Library.Toggles.NoclipToggle.Value and localPlayer.Character then
        for _, part in pairs(localPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end)

-- Fly
local flying = false
local bodyVelocity = nil

FlyToggle:OnChanged(function()
    if Library.Toggles.FlyToggle and Library.Toggles.FlyToggle.Value and localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
        if not flying then
            flying = true
            local humanoid = localPlayer.Character.Humanoid
            humanoid.PlatformStand = true
            
            bodyVelocity = Instance.new("BodyVelocity")
            bodyVelocity.Velocity = Vector3.new(0, 0, 0)
            bodyVelocity.MaxForce = Vector3.new(10000, 10000, 10000)
            bodyVelocity.Parent = localPlayer.Character.HumanoidRootPart
        end
    elseif flying then
        flying = false
        if bodyVelocity then
            bodyVelocity:Destroy()
            bodyVelocity = nil
        end
        if localPlayer.Character and localPlayer.Character:FindFirstChild("Humanoid") then
            localPlayer.Character.Humanoid.PlatformStand = false
        end
    end
end)

runService.RenderStepped:Connect(function()
    if flying and bodyVelocity and localPlayer.Character then
        local moveDir = Vector3.new(0, 0, 0)
        local speed = Library.Options.FlySpeed and Library.Options.FlySpeed.Value or 50
        
        if userInputService:IsKeyDown(Enum.KeyCode.W) then
            moveDir = moveDir + camera.CFrame.LookVector
        end
        if userInputService:IsKeyDown(Enum.KeyCode.S) then
            moveDir = moveDir - camera.CFrame.LookVector
        end
        if userInputService:IsKeyDown(Enum.KeyCode.A) then
            moveDir = moveDir - camera.CFrame.RightVector
        end
        if userInputService:IsKeyDown(Enum.KeyCode.D) then
            moveDir = moveDir + camera.CFrame.RightVector
        end
        if userInputService:IsKeyDown(Enum.KeyCode.Space) then
            moveDir = moveDir + Vector3.new(0, 1, 0)
        end
        if userInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
            moveDir = moveDir - Vector3.new(0, 1, 0)
        end
        
        if moveDir.Magnitude > 0 then
            bodyVelocity.Velocity = moveDir.Unit * speed
        else
            bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        end
    end
end)

-- Anti fall
runService.RenderStepped:Connect(function()
    if Library.Toggles.AntiFall and Library.Toggles.AntiFall.Value and localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
        if localPlayer.Character.HumanoidRootPart.Position.Y < -50 then
            localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(0, 100, 0)
        end
    end
end)

-- ============================================
-- UI SETUP
-- ============================================

-- MAIN TAB
local CombatGroup = MainTab:AddLeftGroupbox("Combat")

-- Hit Sounds
CombatGroup:AddToggle("HitSounds", {
    Text = "Hit Sounds",
    Default = false,
    Tooltip = "Play sound when you hit someone"
})

local HitSoundsBox = CombatGroup:AddDependencyBox()
HitSoundsBox:AddDropdown("HitSoundSelected", {
    Text = "Sound",
    Values = {"sparkle", "rust", "neverlose", "bow"},
    Default = "sparkle",
    Multi = false
})
HitSoundsBox:AddSlider("HitSoundVolume", {
    Text = "Volume",
    Default = 0.5,
    Min = 0,
    Max = 1,
    Rounding = 2
})

CombatGroup:AddDivider()

-- Auto Reload
CombatGroup:AddToggle("AutoReload", {
    Text = "Auto Reload",
    Default = false,
    Tooltip = "Automatically reload weapons"
})

local ReloadBox = CombatGroup:AddDependencyBox()
ReloadBox:AddToggle("AutoSwitch", {
    Text = "Auto Switch",
    Default = false,
    Tooltip = "Switch to guns with ammo"
})

-- Gun Mods
CombatGroup:AddToggle("GunMods", {
    Text = "Gun Mods",
    Default = false,
    Tooltip = "Modify gun attributes"
})

local GunModsBox = CombatGroup:AddDependencyBox()
GunModsBox:AddSlider("GunRange", {
    Text = "Range",
    Default = 150,
    Min = 1,
    Max = 9999,
    Rounding = 1,
    Suffix = "studs"
})
GunModsBox:AddSlider("SpreadRadius", {
    Text = "Spread Radius",
    Default = 0.03,
    Min = 0,
    Max = 1,
    Rounding = 3
})
GunModsBox:AddSlider("FireRate", {
    Text = "Fire Rate",
    Default = 0.1,
    Min = 0,
    Max = 1,
    Rounding = 2,
    Suffix = "s"
})

CombatGroup:AddDivider()

-- Hit Notifications
CombatGroup:AddToggle("HitNotifications", {
    Text = "Hit Notifications",
    Default = false
})

-- Utility Group (Right side)
local UtilityGroup = MainTab:AddRightGroupbox("Utility")

-- Team Switcher
UtilityGroup:AddLabel("Team Switcher")
local TeamDropdown = UtilityGroup:AddDropdown("SelectedTeam", {
    Text = "Select Team",
    Values = {"Criminals", "Inmates", "Guards", "Neutral"},
    Default = "Neutral",
    Multi = false
})

UtilityGroup:AddButton({
    Text = "Switch Team",
    Func = function() switchTeam(TeamDropdown.Value) end,
    DoubleClick = true
})

UtilityGroup:AddDivider()

-- Auto Pickup
UtilityGroup:AddToggle("AutoPickup", {
    Text = "Auto Pickup",
    Default = false
})

local PickupBox = UtilityGroup:AddDependencyBox()
PickupBox:AddToggle("PickupKeycard", {Text = "Key Card", Default = true})
PickupBox:AddToggle("PickupM9", {Text = "M9", Default = true})

-- Auto Arrest
UtilityGroup:AddToggle("AutoArrest", {
    Text = "Auto Arrest",
    Default = false
})

local ArrestBox = UtilityGroup:AddDependencyBox()
ArrestBox:AddSlider("ArrestRange", {
    Text = "Arrest Range",
    Default = 100,
    Min = 1,
    Max = 1000,
    Rounding = 1,
    Suffix = "studs"
})

-- RAGE TAB
local SilentGroup = RageTab:AddLeftGroupbox("Silent Aim")

SilentGroup:AddToggle("SilentAim", {
    Text = "Silent Aim",
    Default = false
}):AddKeyPicker("SilentAimKey", {
    Text = "Silent Aim Key",
    Default = "MB2",
    Mode = "Hold"
})

local SilentBox = SilentGroup:AddDependencyBox()

-- Targets
SilentBox:AddToggle("SilentPlayers", {Text = "Target Players", Default = true})
SilentBox:AddToggle("SilentWalls", {Text = "Wall Check", Default = true})

SilentBox:AddDivider()

-- Mode
SilentBox:AddDropdown("SilentMode", {
    Text = "Mode",
    Values = {"Mouse", "Position"},
    Default = "Mouse",
    Multi = false
})

-- Range
SilentBox:AddSlider("SilentRange", {
    Text = "Range",
    Default = 150,
    Min = 1,
    Max = 1000,
    Rounding = 1,
    Suffix = "studs"
})

-- Hit chance
SilentBox:AddSlider("HitChance", {
    Text = "Hit Chance",
    Default = 85,
    Min = 0,
    Max = 100,
    Rounding = 1,
    Suffix = "%"
})

-- Headshot chance
SilentBox:AddSlider("HeadshotChance", {
    Text = "Headshot Chance",
    Default = 65,
    Min = 0,
    Max = 100,
    Rounding = 1,
    Suffix = "%"
})

-- Auto Fire
SilentBox:AddToggle("AutoFire", {Text = "Auto Fire", Default = false})

local AutoFireBox = SilentBox:AddDependencyBox()
AutoFireBox:AddSlider("AutoFireDelay", {
    Text = "Delay",
    Default = 0.1,
    Min = 0,
    Max = 1,
    Rounding = 2,
    Suffix = "s"
})
AutoFireBox:AddDropdown("ShootMethod", {
    Text = "Method",
    Values = {"Simulation", "Click"},
    Default = "Simulation",
    Multi = false
})

-- Face target
SilentBox:AddToggle("FaceTarget", {Text = "Face Target", Default = false})
SilentBox:AddToggle("ShowTargetInfo", {Text = "Show Target Info", Default = false})

-- Range Circle
SilentBox:AddToggle("RangeCircle", {
    Text = "Range Circle",
    Default = false
})

local CircleBox = SilentBox:AddDependencyBox()
CircleBox:AddColorPicker("CircleColor", {Default = Color3.new(0, 1, 1)})
CircleBox:AddSlider("CircleTransparency", {
    Text = "Transparency",
    Default = 0.5,
    Min = 0,
    Max = 1,
    Rounding = 2
})
CircleBox:AddToggle("CircleFilled", {Text = "Filled", Default = false})

-- Killaura Group (Right side)
local KillauraGroup = RageTab:AddRightGroupbox("Kill Aura")

KillauraGroup:AddToggle("Killaura", {
    Text = "Kill Aura",
    Default = false
})

local KillauraBox = KillauraGroup:AddDependencyBox()

-- Targets
KillauraBox:AddToggle("KillauraPlayers", {Text = "Target Players", Default = true})
KillauraBox:AddToggle("KillauraWalls", {Text = "Wall Check", Default = true})

-- CPS
KillauraBox:AddLabel("Attacks per Second")
KillauraBox:AddSlider("KillauraCPSMin", {
    Text = "Min CPS",
    Default = 8,
    Min = 1,
    Max = 15,
    Rounding = 1,
    Compact = true
})
KillauraBox:AddSlider("KillauraCPSMax", {
    Text = "Max CPS",
    Default = 12,
    Min = 1,
    Max = 15,
    Rounding = 1,
    Compact = true
})

-- Range
KillauraBox:AddSlider("KillauraRange", {
    Text = "Range",
    Default = 13,
    Min = 1,
    Max = 30,
    Rounding = 1,
    Suffix = "studs"
})

-- Max Targets
KillauraBox:AddSlider("KillauraMaxTargets", {
    Text = "Max Targets",
    Default = 10,
    Min = 1,
    Max = 10,
    Rounding = 0
})

-- Face target
KillauraBox:AddToggle("KillauraFaceTarget", {Text = "Face Target", Default = false})

-- VISUALS TAB
local VisualsGroup = VisualsTab:AddLeftGroupbox("ESP")
VisualsGroup:AddToggle("ESPToggle", {Text = "Enable ESP", Default = false})

local EffectsGroup = VisualsTab:AddRightGroupbox("Effects")

-- Target Particles
EffectsGroup:AddToggle("TargetParticles", {
    Text = "Target Particles",
    Default = false
})

local ParticleBox = EffectsGroup:AddDependencyBox()
ParticleBox:AddTextBox("ParticleTexture", {
    Text = "Texture ID",
    Default = "rbxassetid://14736249347",
    Numeric = false
})
ParticleBox:AddColorPicker("ParticleColor1", {Default = Color3.new(1, 0, 0)})
ParticleBox:AddColorPicker("ParticleColor2", {Default = Color3.new(0, 0, 1)})
ParticleBox:AddSlider("ParticleSize", {
    Text = "Size",
    Default = 0.2,
    Min = 0,
    Max = 1,
    Rounding = 2
})

-- Show Target
EffectsGroup:AddToggle("ShowTarget", {
    Text = "Show Target Box",
    Default = false
})

local TargetBox = EffectsGroup:AddDependencyBox()
TargetBox:AddColorPicker("TargetSwingColor", {Default = Color3.new(1, 1, 0)})
TargetBox:AddColorPicker("TargetAttackColor", {Default = Color3.new(1, 0, 0)})

-- MISC TAB
local MovementGroup = MiscTab:AddLeftGroupbox("Movement")

-- Speed
MovementGroup:AddToggle("SpeedToggle", {Text = "Speed Hack", Default = false})
:AddKeyPicker("SpeedKey", {Text = "Speed Key", Default = "V", Mode = "Toggle"})

local SpeedBox = MovementGroup:AddDependencyBox()
SpeedBox:AddSlider("WalkSpeed", {
    Text = "Walk Speed",
    Default = 50,
    Min = 16,
    Max = 200,
    Rounding = 1
})

-- Noclip
MovementGroup:AddToggle("NoclipToggle", {Text = "Noclip", Default = false})
:AddKeyPicker("NoclipKey", {Text = "Noclip Key", Default = "N", Mode = "Toggle"})

-- Fly
MovementGroup:AddToggle("FlyToggle", {Text = "Fly", Default = false})
:AddKeyPicker("FlyKey", {Text = "Fly Key", Default = "F", Mode = "Toggle"})

local FlyBox = MovementGroup:AddDependencyBox()
FlyBox:AddSlider("FlySpeed", {
    Text = "Fly Speed",
    Default = 50,
    Min = 10,
    Max = 200,
    Rounding = 1
})

-- Jump
MovementGroup:AddToggle("JumpToggle", {Text = "High Jump", Default = false})
:AddKeyPicker("JumpKey", {Text = "Jump Key", Default = "J", Mode = "Hold"})

local JumpBox = MovementGroup:AddDependencyBox()
JumpBox:AddSlider("JumpPower", {
    Text = "Jump Power",
    Default = 100,
    Min = 50,
    Max = 500,
    Rounding = 1
})

MovementGroup:AddDivider()
MovementGroup:AddToggle("AntiFall", {Text = "Anti Fall", Default = false})
MovementGroup:AddToggle("SafeWalk", {Text = "Safe Walk", Default = false})
MovementGroup:AddToggle("AntiRagdoll", {Text = "Anti Ragdoll", Default = false})
MovementGroup:AddToggle("Blink", {Text = "Blink (Desync)", Default = false})
MovementGroup:AddToggle("Disabler", {Text = "Disabler", Default = false})

-- Character Group (Right side)
local CharacterGroup = MiscTab:AddRightGroupbox("Character")

CharacterGroup:AddToggle("HeadPitch", {
    Text = "Head Pitch Spinbot",
    Default = false
})
CharacterGroup:AddToggle("AutoRespawn", {Text = "Auto Respawn", Default = false})

CharacterGroup:AddDivider()
CharacterGroup:AddButton({
    Text = "Respawn Character",
    Func = function()
        if localPlayer.Character then
            localPlayer.Character:BreakJoints()
        end
    end,
    DoubleClick = true
})

CharacterGroup:AddButton({
    Text = "Rejoin Server",
    Func = function()
        game:GetService("TeleportService"):Teleport(game.PlaceId, localPlayer)
    end,
    DoubleClick = true
})

-- SETTINGS TAB
local UIGroup = SettingsTab:AddLeftGroupbox("UI Settings")

UIGroup:AddToggle("KeybindMenuOpen", {
    Text = "Show Keybind Menu",
    Default = false,
    Callback = function(v) Library.KeybindFrame.Visible = v end
})

UIGroup:AddToggle("ShowCustomCursor", {
    Text = "Custom Cursor",
    Default = true,
    Callback = function(v) Library.ShowCustomCursor = v end
})

UIGroup:AddDivider()
UIGroup:AddLabel("Menu Keybind"):AddKeyPicker("MenuKeybind", {
    Text = "Menu Keybind",
    Default = "RightShift",
    NoUI = true
})

UIGroup:AddToggle("ExecuteOnTeleport", {Text = "Execute On Teleport", Default = true})

-- Theme Group
local ThemeGroup = SettingsTab:AddRightGroupbox("Theme")
ThemeGroup:AddLabel("Background Color"):AddColorPicker("BackgroundColor", {Default = Color3.fromRGB(30, 30, 30)})
ThemeGroup:AddLabel("Main Color"):AddColorPicker("MainColor", {Default = Color3.fromRGB(0, 162, 255)})
ThemeGroup:AddLabel("Accent Color"):AddColorPicker("AccentColor", {Default = Color3.fromRGB(255, 255, 255)})
ThemeGroup:AddLabel("Font Color"):AddColorPicker("FontColor", {Default = Color3.fromRGB(255, 255, 255)})
ThemeGroup:AddDivider()

-- Initialize theme and save managers
ThemeManager:SetLibrary(Library)
SaveManager:SetLibrary(Library)
ThemeManager:ApplyToTab(SettingsTab)
SaveManager:BuildConfigSection(SettingsTab)

-- Set menu keybind
Library.ToggleKeybind = Library.Options.MenuKeybind

-- Load config
SaveManager:LoadAutoloadConfig()

-- Notification
Library:Notify("Prison Life script fully loaded!", 3)
